{"version":3,"sources":["services/MoviesApi.js","views/FilmPendingView/FilmPendingView.js","views/FilmPendingView/FilmPendingView.module.css","views/FilmErrorView/FilmErrorView.js","views/FilmErrorView/FilmErrorView.module.css","views/stylesViews.module.css","views/FillmGalleryView/FilmGalleryView.module.css","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2.js","views/Searchbar.js","views/FillmGalleryView/FillmGalleryView.js","MoviesByNamePage/MoviesByNamePage.js","views/Movies.js"],"names":["BASE_URL","API_KEY","POSTER_URL","fetchWithErrorHendling","a","url","config","fetch","response","ok","json","Promise","reject","Error","fetchTrendingMovies","fetchMoviesByName","name","fetchMovieDetails","id","fetchMoviesCasts","fetchMovieReviews","FilmPendingView","className","s","loader","type","color","height","width","Component","module","exports","FilmErrorView","message","role","_defineProperty","obj","key","value","Object","defineProperty","enumerable","configurable","writable","ownKeys","object","enumerableOnly","keys","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","push","apply","_objectSpread2","target","i","arguments","length","source","forEach","getOwnPropertyDescriptors","defineProperties","Searchbar","onSubmit","useState","filmName","setfilmName","event","preventDefault","trim","toast","input","onChange","currentTarget","toLowerCase","autocomplete","autofocus","placeholder","button","FilmGallery","films","useRouteMatch","list","map","film","poster_path","item","to","link","image","src","alt","title","Status","MoviesByNamePage","queryURL","error","setError","status","setStatus","setFilms","fetchMovies","then","newFilms","total_results","results","catch","err","useEffect","FillmGalleryView","MoviesPage","history","useHistory","location","useLocation","setFilmName","URLSearchParams","search","get","console","log","query"],"mappings":"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","file":"static/js/MoviesView.25aa4f59.chunk.js","sourcesContent":["const BASE_URL = \"https://api.themoviedb.org/3\";\r\nconst API_KEY = \"65125fece056379d46954e3213fdb44a\";\r\nexport const POSTER_URL = \"https://image.tmdb.org/t/p/w500\";\r\n\r\nasync function fetchWithErrorHendling(url = \"\", config = {}) {\r\n  const response = await fetch(url, config);\r\n  return response.ok\r\n    ? await response.json()\r\n    : Promise.reject(new Error(\"Not found\"));\r\n}\r\n\r\nexport function fetchTrendingMovies() {\r\n  return fetchWithErrorHendling(\r\n    `${BASE_URL}/trending/all/day?api_key=${API_KEY}`\r\n  );\r\n}\r\n\r\nexport function fetchMoviesByName(name) {\r\n  return fetchWithErrorHendling(\r\n    `${BASE_URL}/search/movie?api_key=${API_KEY}&language=en-US&query=${name}&page=1&include_adult=false`\r\n  );\r\n}\r\n\r\nexport function fetchMovieDetails(id) {\r\n  return fetchWithErrorHendling(\r\n    `${BASE_URL}/movie/${id}?api_key=${API_KEY}&language=en-US`\r\n  );\r\n}\r\n\r\nexport function fetchMoviesCasts(id) {\r\n  return fetchWithErrorHendling(\r\n    `${BASE_URL}/movie/${id}/credits?api_key=${API_KEY}&language=en-US`\r\n  );\r\n}\r\n\r\nexport function fetchMovieReviews(id) {\r\n  return fetchWithErrorHendling(\r\n    `${BASE_URL}/movie/${id}/reviews?api_key=${API_KEY}&language=en-US&page=1`\r\n  );\r\n}\r\n","import React, { Component } from \"react\";\r\nimport Loader from \"react-loader-spinner\";\r\nimport \"react-loader-spinner/dist/loader/css/react-spinner-loader.css\";\r\nimport s from \"./FilmPendingView.module.css\";\r\n\r\nclass FilmPendingView extends Component {\r\n  render() {\r\n    return (\r\n      <Loader\r\n        className={s.loader}\r\n        type=\"Audio\"\r\n        color=\"#00BFFF\"\r\n        height={80}\r\n        width={80}\r\n      />\r\n    );\r\n  }\r\n}\r\n\r\nexport default FilmPendingView;\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"loader\":\"FilmPendingView_loader__35k67\"};","import PropTypes from \"prop-types\";\r\nimport s from \"./FilmErrorView.module.css\";\r\n\r\nfunction FilmErrorView({ message }) {\r\n  return (\r\n    <div role=\"alert\">\r\n      <p className={s.message}>\r\n        Sorry, we cannot process your request. Error: {message}\r\n      </p>\r\n    </div>\r\n  );\r\n}\r\n\r\nFilmErrorView.propTypes = {\r\n  message: PropTypes.string.isRequired,\r\n};\r\n\r\nexport default FilmErrorView;\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"message\":\"FilmErrorView_message__13OmD\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"button\":\"stylesViews_button__24i6u\",\"input\":\"stylesViews_input__1xTE3\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"list\":\"FilmGalleryView_list__1t5aB\",\"item\":\"FilmGalleryView_item__e53ys\",\"link\":\"FilmGalleryView_link__jiRuC\",\"image\":\"FilmGalleryView_image__3Iz3E\",\"title\":\"FilmGalleryView_title__2zexQ\"};","export default function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}","import defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nexport default function _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}","import { useState } from \"react\";\r\nimport { toast } from \"react-toastify\";\r\nimport s from \"../views/stylesViews.module.css\";\r\n\r\nfunction Searchbar({ onSubmit }) {\r\n  const [filmName, setfilmName] = useState(\"\");\r\n\r\n  //получение значения input\r\n  const handleNameChange = (event) => {\r\n    // const imageQuery = event.currentTarget.value.toLowerCase();\r\n    setfilmName(event.currentTarget.value.toLowerCase());\r\n  };\r\n  //отправка значения из формы\r\n  const handleSubmit = (event) => {\r\n    event.preventDefault();\r\n    if (filmName.trim() === \"\") {\r\n      toast(\"Please enter the query!\");\r\n      return;\r\n    }\r\n    // this.props.onSubmit - вызывает props из App под именем onSubmit\r\n    onSubmit(filmName);\r\n    setfilmName(\"\");\r\n  };\r\n  return (\r\n    <form className=\"SearchForm\" onSubmit={handleSubmit}>\r\n      <input\r\n        className={s.input}\r\n        type=\"text\"\r\n        name=\"filmName\"\r\n        value={filmName}\r\n        onChange={handleNameChange}\r\n        autocomplete=\"off\"\r\n        autofocus\r\n        placeholder=\"Search movie by name\"\r\n      />\r\n      <button type=\"submit\" className={s.button}>\r\n        <span className=\"SearchForm-button-label\">Search</span>\r\n      </button>\r\n    </form>\r\n  );\r\n}\r\n\r\nexport default Searchbar;\r\n","import { Link, useRouteMatch } from \"react-router-dom\";\r\nimport PropTypes from \"prop-types\";\r\nimport { POSTER_URL } from \"../../services/MoviesApi\";\r\nimport s from \"../FillmGalleryView/FilmGalleryView.module.css\";\r\n\r\nfunction FilmGallery({ films }) {\r\n  const { url } = useRouteMatch();\r\n\r\n  return (\r\n    <ul className={s.list}>\r\n      {films.map((film) => (\r\n        <>\r\n          {film.poster_path && (\r\n            <li key={film.id} className={s.item}>\r\n              <Link to={`${url}/${film.id}`} className={s.link}>\r\n                <img\r\n                  className={s.image}\r\n                  src={POSTER_URL + film.poster_path}\r\n                  alt={film.title}\r\n                  width=\"300\"\r\n                  height=\"450\"\r\n                />\r\n                <p className={s.title}>{film.title}</p>\r\n              </Link>\r\n            </li>\r\n          )}\r\n        </>\r\n      ))}\r\n    </ul>\r\n  );\r\n}\r\n\r\nFilmGallery.propTypes = {\r\n  images: PropTypes.array,\r\n};\r\n\r\nexport default FilmGallery;\r\n","import FilmErrorView from \"../views/FilmErrorView/FilmErrorView\";\r\nimport FilmPendingView from \"../views/FilmPendingView/FilmPendingView\";\r\nimport FillmGalleryView from \"../views/FillmGalleryView/FillmGalleryView\";\r\nimport { useState, useEffect } from \"react\";\r\nimport { fetchMoviesByName, POSTER_URL } from \"../services/MoviesApi\";\r\n\r\nconst Status = {\r\n  IDLE: \"idle\",\r\n  PENDING: \"pending\",\r\n  RESOLVED: \"resolved\",\r\n  REJECTED: \"rejected\",\r\n};\r\n\r\nexport default function MoviesByNamePage({ filmName, queryURL }) {\r\n  const [error, setError] = useState({});\r\n  const [status, setStatus] = useState(Status.IDLE);\r\n  const [films, setFilms] = useState([]);\r\n\r\n  const fetchMovies = (name) => {\r\n    fetchMoviesByName(name)\r\n      .then((newFilms) => {\r\n        if (newFilms.total_results > 0) {\r\n          setFilms(newFilms.results);\r\n          setStatus(Status.RESOLVED);\r\n        } else return Promise.reject(new Error(\"Invalid request\"));\r\n      })\r\n      .catch((err) => {\r\n        setError(err);\r\n        setStatus(Status.REJECTED);\r\n      });\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (filmName === \"\" && queryURL !== null) {\r\n      fetchMovies(queryURL);\r\n      return;\r\n    }\r\n    if (filmName) {\r\n      fetchMovies(filmName);\r\n    }\r\n  }, [filmName, queryURL]);\r\n\r\n  if (status === Status.IDLE) {\r\n    return <p>Please enter your search term</p>;\r\n  }\r\n\r\n  if (status === Status.PENDING) {\r\n    return <FilmPendingView />;\r\n  }\r\n\r\n  if (status === Status.REJECTED) {\r\n    return <FilmErrorView message={error.message} />;\r\n  }\r\n\r\n  if (status === Status.RESOLVED) {\r\n    return (\r\n      <>\r\n        <FillmGalleryView films={films} />\r\n      </>\r\n    );\r\n  }\r\n}\r\n","// import MovieDetailsPage from \"./MovieDetailsPage/MovieDetailsPage\";\r\nimport { useState } from \"react\";\r\nimport { useHistory, useLocation } from \"react-router-dom\";\r\nimport Searchbar from \"./Searchbar\";\r\nimport MoviesByNamePage from \"../MoviesByNamePage/MoviesByNamePage\";\r\n\r\nexport default function MoviesPage() {\r\n  const history = useHistory();\r\n  const location = useLocation();\r\n  const [filmName, setFilmName] = useState(\"\");\r\n  const [films, setFilms] = useState([]);\r\n\r\n  const queryURL = new URLSearchParams(location.search).get(`query`);\r\n\r\n  console.log(queryURL);\r\n\r\n  const searchQuery = (query) => {\r\n    history.push({ ...location, search: `query=${query}` });\r\n  };\r\n\r\n  const onSubmit = (name) => {\r\n    // console.log(history);\r\n    // console.log(location);\r\n    // history.push(\"/\");\r\n    setFilmName(name);\r\n    setFilms([]);\r\n    searchQuery(name);\r\n  };\r\n  return (\r\n    <>\r\n      <Searchbar onSubmit={onSubmit} />\r\n      <MoviesByNamePage filmName={filmName} queryURL={queryURL} />\r\n    </>\r\n  );\r\n}\r\n"],"sourceRoot":""}